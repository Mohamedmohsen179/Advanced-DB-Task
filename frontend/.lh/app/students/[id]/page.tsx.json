{
    "sourceFile": "app/students/[id]/page.tsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1764354910921,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1764354910921,
            "name": "Commit-0",
            "content": "'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { useParams } from 'next/navigation';\r\nimport Link from 'next/link';\r\nimport { Student, CourseWithSchedule, ApiResponse } from '../../../types';\r\nimport { apiService } from '../../../services/api';\r\nimport { Card, CardContent, CardHeader } from '../../../components/ui/Card';\r\nimport Button from '../../../components/ui/Button';\r\n\r\nexport default function StudentDetailsPage() {\r\n  const params = useParams();\r\n  const studentId = params.id as string;\r\n  \r\n  const [student, setStudent] = useState<Student | null>(null);\r\n  const [courses, setCourses] = useState<CourseWithSchedule[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [coursesLoading, setCoursesLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  useEffect(() => {\r\n    if (studentId) {\r\n      loadStudentData();\r\n      loadStudentCourses();\r\n    }\r\n  }, [studentId]); \r\n\r\n  const loadStudentData = async () => {\r\n    try {\r\n      setLoading(true);\r\n      setError(null);\r\n      const response: ApiResponse<Student> = await apiService.getStudent(studentId);\r\n      \r\n      if (response.success && response.data) {\r\n        setStudent(response.data);\r\n      } else {\r\n        setError('Student not found');\r\n      }\r\n    } catch (err) {\r\n      setError('Failed to load student data');\r\n      console.error('Error loading student:', err);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const loadStudentCourses = async () => {\r\n    try {\r\n      setCoursesLoading(true);\r\n      const response: ApiResponse<CourseWithSchedule[]> = await apiService.getStudentCourses(studentId);\r\n      \r\n      if (response.success && response.data) {\r\n        setCourses(response.data);\r\n      }\r\n    } catch (err) {\r\n      console.error('Error loading student courses:', err);\r\n    } finally {\r\n      setCoursesLoading(false);\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center py-12\">\r\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\r\n        <span className=\"ml-2 text-gray-600\">Loading student details...</span>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error || !student) {\r\n    return (\r\n      <div className=\"bg-red-50 border border-red-200 rounded-md p-4\">\r\n        <div className=\"flex\">\r\n          <div className=\"flex-shrink-0\">\r\n            <svg className=\"h-5 w-5 text-red-400\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\r\n              <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z\" clipRule=\"evenodd\" />\r\n            </svg>\r\n          </div>\r\n          <div className=\"ml-3\">\r\n            <h3 className=\"text-sm font-medium text-red-800\">Error</h3>\r\n            <div className=\"mt-2 text-sm text-red-700\">\r\n              <p>{error}</p>\r\n            </div>\r\n            <div className=\"mt-4\">\r\n              <Link href=\"/students\">\r\n                <Button variant=\"outline\">Back to Students</Button>\r\n              </Link>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Header */}\r\n      <div className=\"flex items-center justify-between\">\r\n        <div>\r\n          <h1 className=\"text-2xl font-bold text-gray-900\">\r\n            {student.firstName} {student.lastName}\r\n          </h1>\r\n          <p className=\"mt-1 text-sm text-gray-500\">\r\n            Student ID: {student.studentId}\r\n          </p>\r\n        </div>\r\n        <div className=\"flex space-x-3\">\r\n          <Link href=\"/students\">\r\n            <Button variant=\"outline\">Back to Students</Button>\r\n          </Link>\r\n          <Button>Edit Student</Button>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\r\n        {/* Student Information */}\r\n        <div className=\"lg:col-span-2\">\r\n          <Card>\r\n            <CardHeader>\r\n              <h2 className=\"text-lg font-semibold text-gray-900\">Student Information</h2>\r\n            </CardHeader>\r\n            <CardContent>\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-500\">Full Name</label>\r\n                  <p className=\"mt-1 text-sm text-gray-900\">{student.firstName} {student.lastName}</p>\r\n                </div>\r\n                \r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-500\">Email</label>\r\n                  <p className=\"mt-1 text-sm text-gray-900\">{student.email}</p>\r\n                </div>\r\n                \r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-500\">Phone Number</label>\r\n                  <p className=\"mt-1 text-sm text-gray-900\">{student.phoneNumber || 'Not provided'}</p>\r\n                </div>\r\n                \r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-500\">Date of Birth</label>\r\n                  <p className=\"mt-1 text-sm text-gray-900\">\r\n                    {new Date(student.dateOfBirth).toLocaleDateString()}\r\n                  </p>\r\n                </div>\r\n                \r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-500\">Enrollment Date</label>\r\n                  <p className=\"mt-1 text-sm text-gray-900\">\r\n                    {new Date(student.enrollmentDate).toLocaleDateString()}\r\n                  </p>\r\n                </div>\r\n                \r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-500\">Status</label>\r\n                  <span className={`mt-1 inline-flex px-2 py-1 text-xs font-semibold rounded-full ${\r\n                    student.status === 'active' \r\n                      ? 'bg-green-100 text-green-800'\r\n                      : student.status === 'inactive'\r\n                      ? 'bg-gray-100 text-gray-800'\r\n                      : student.status === 'graduated'\r\n                      ? 'bg-blue-100 text-blue-800'\r\n                      : 'bg-red-100 text-red-800'\r\n                  }`}>\r\n                    {student.status}\r\n                  </span>\r\n                </div>\r\n                \r\n                {student.gpa && (\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-500\">GPA</label>\r\n                    <p className=\"mt-1 text-sm text-gray-900\">{student.gpa.toFixed(2)}</p>\r\n                  </div>\r\n                )}\r\n              </div>\r\n              \r\n              {student.address && (\r\n                <div className=\"mt-6 pt-6 border-t border-gray-200\">\r\n                  <h3 className=\"text-md font-medium text-gray-900 mb-4\">Address</h3>\r\n                  <div className=\"text-sm text-gray-900\">\r\n                    {student.address.street && <p>{student.address.street}</p>}\r\n                    {(student.address.city || student.address.state || student.address.zipCode) && (\r\n                      <p>\r\n                        {student.address.city}\r\n                        {student.address.city && student.address.state && ', '}\r\n                        {student.address.state} {student.address.zipCode}\r\n                      </p>\r\n                    )}\r\n                    {student.address.country && <p>{student.address.country}</p>}\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </CardContent>\r\n          </Card>\r\n        </div>\r\n\r\n        {/* Quick Stats */}\r\n        <div>\r\n          <Card>\r\n            <CardHeader>\r\n              <h2 className=\"text-lg font-semibold text-gray-900\">Quick Stats</h2>\r\n            </CardHeader>\r\n            <CardContent>\r\n              <div className=\"space-y-4\">\r\n                <div className=\"flex items-center justify-between\">\r\n                  <span className=\"text-sm text-gray-500\">Enrolled Courses</span>\r\n                  <span className=\"text-lg font-semibold text-gray-900\">{courses.length}</span>\r\n                </div>\r\n                \r\n                {student.gpa && (\r\n                  <div className=\"flex items-center justify-between\">\r\n                    <span className=\"text-sm text-gray-500\">Current GPA</span>\r\n                    <span className=\"text-lg font-semibold text-gray-900\">{student.gpa.toFixed(2)}</span>\r\n                  </div>\r\n                )}\r\n                \r\n                <div className=\"flex items-center justify-between\">\r\n                  <span className=\"text-sm text-gray-500\">Years Enrolled</span>\r\n                  <span className=\"text-lg font-semibold text-gray-900\">\r\n                    {Math.floor((new Date().getTime() - new Date(student.enrollmentDate).getTime()) / (1000 * 60 * 60 * 24 * 365))}\r\n                  </span>\r\n                </div>\r\n              </div>\r\n            </CardContent>\r\n          </Card>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Enrolled Courses */}\r\n      <Card>\r\n        <CardHeader>\r\n          <div className=\"flex items-center justify-between\">\r\n            <h2 className=\"text-lg font-semibold text-gray-900\">Enrolled Courses</h2>\r\n            <Button size=\"sm\">Enroll in Course</Button>\r\n          </div>\r\n        </CardHeader>\r\n        <CardContent>\r\n          {coursesLoading ? (\r\n            <div className=\"flex items-center justify-center py-8\">\r\n              <div className=\"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600\"></div>\r\n              <span className=\"ml-2 text-gray-600\">Loading courses...</span>\r\n            </div>\r\n          ) : courses.length === 0 ? (\r\n            <div className=\"text-center py-8\">\r\n              <div className=\"text-gray-400 text-4xl mb-4\">ðŸ“š</div>\r\n              <h3 className=\"text-lg font-medium text-gray-900 mb-2\">No courses enrolled</h3>\r\n              <p className=\"text-gray-500 mb-4\">This student is not currently enrolled in any courses.</p>\r\n              <Button size=\"sm\">Enroll in Course</Button>\r\n            </div>\r\n          ) : (\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n              {courses.map((course) => (\r\n                <div key={course.id} className=\"border border-gray-200 rounded-lg p-4\">\r\n                  <div className=\"flex items-start justify-between\">\r\n                    <div>\r\n                      <h3 className=\"font-medium text-gray-900\">{course.name}</h3>\r\n                      <p className=\"text-sm text-gray-500\">{course.code}</p>\r\n                      <p className=\"text-sm text-gray-600 mt-1\">{course.credits} Credits</p>\r\n                      {course.instructor && (\r\n                        <p className=\"text-sm text-gray-600\">\r\n                          Instructor: {course.instructor.firstName} {course.instructor.lastName}\r\n                        </p>\r\n                      )}\r\n                    </div>\r\n                    <span className={`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${\r\n                      course.status === 'active' \r\n                        ? 'bg-green-100 text-green-800'\r\n                        : 'bg-gray-100 text-gray-800'\r\n                    }`}>\r\n                      {course.status}\r\n                    </span>\r\n                  </div>\r\n                  \r\n                  {course.schedules && course.schedules.length > 0 && (\r\n                    <div className=\"mt-3 pt-3 border-t border-gray-100\">\r\n                      <p className=\"text-xs font-medium text-gray-500 mb-1\">Schedule:</p>\r\n                      {course.schedules.map((schedule) => (\r\n                        <p key={schedule.id} className=\"text-xs text-gray-600\">\r\n                          {schedule.dayOfWeek.charAt(0).toUpperCase() + schedule.dayOfWeek.slice(1)} {schedule.startTime} - {schedule.endTime}\r\n                        </p>\r\n                      ))}\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              ))}\r\n            </div>\r\n          )}\r\n        </CardContent>\r\n      </Card>\r\n    </div>\r\n  );\r\n}\r\n"
        }
    ]
}